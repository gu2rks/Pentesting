## System calls 0x80

The instruction int 0x80 indicates a system call. Depending on the value stored in the EAX register different actions are performed.

| EAX Value | System Call |
| ------------- | ------------- |
| 1  | sys_exit  |
| 2  | sys_fork  |
| 3  | sys_read |
| 4  | sys_write  |
| 5  | sys_open  |
| 6  | sys_close  |


Example:  
```assembly
   0x8048080:	mov    eax,0x4 ; system write
   0x8048085:	mov    ebx,0x1 ; file descriptor (stdout)
   0x804808a:	mov    ecx,msg ; What to write
   0x804808f:	mov    edx,0x26 ; message length
   0x8048094:	int    0x80 ; call kernel
```

More info:  
* https://www.tutorialspoint.com/assembly_programming/assembly_system_calls.htm
* http://shell-storm.org/shellcode/files/syscalls.html


## Registers
Before explaining all registers the concept of volatility will be explained.  
Taken from https://wiki.skullsecurity.org/Registers

### Volatility
Some registers are typically volatile across functions, and others remain unchanged. This is a feature of the compiler's standards and must be looked after in the code, registers are not preserved automatically (although in some assembly languages they are -- but not in x86). What that means is, when a function is called, there is no guarantee that volatile registers will retain their value when the function returns, and it's the function's responsibility to preserve non-volatile registers.

The conventions used by Microsoft's compiler are:  
* Volatile: ecx, edx
* Non-Volatile: ebx, esi, edi, ebp
* Special: eax, esp (discussed later)

### eax
eax is a 32-bit general-purpose register with two common uses: to store the return value of a function and as a special register for certain calculations. It is technically a volatile register, since the value isn't preserved. Instead, its value is set to the return value of a function before a function returns. Other than esp, this is probably the most important register to remember for this reason. eax is also used specifically in certain calculations, such as multiplication and division, as a special register. That use will be examined in the instructions section.

Here is an example of a function returning in C:  
return 3;  // Return the value 3

Here's the same code in assembly:  
mov eax, 3 ; Set eax (the return value) to 3
ret        ; Return

### ebx
ebx is a non-volatile general-purpose register. It has no specific uses, but is often set to a commonly used value (such as 0) throughout a function to speed up calculations.

### ecx
ecx is a volatile general-purpose register that is occasionally used as a function parameter or as a loop counter.

### edx
edx is a volatile general-purpose register that is occasionally used as a function parameter. 

### esi
esi is a non-volatile general-purpose register that is often used as a pointer. Specifically, for "rep-" class instructions, which require a source and a destination for data, esi points to the "source". esi often stores data that is used throughout a function because it doesn't change.

### edi
edi is a non-volatile general-purpose register that is often used as a pointer. It is similar to esi, except that it is generally used as a destination for data.

### esp
esp is a special register that stores a pointer to the top of the stack (the top is actually at a lower virtual address than the bottom as the stack grows downwards in memory towards the heap). 

### Stack frame
All the space between esp and ebp is the stack frame of whatever function is currently called

### ebp
ebp contains the address of the base of the stack frame
